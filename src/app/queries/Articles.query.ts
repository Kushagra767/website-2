import { Injectable } from '@angular/core';
import { Query } from 'apollo-angular';
import gql from 'graphql-tag';

export interface ArticlesGQLEntry {
	_id: string;
	title: string;
	author: string;
	excerpt: string;
	tags: string[];
	releaseDate?: string;
	previewImage?: {
		path: string;
	};
}

export interface ArticlesGQLResponse {
	articlesCollection: ArticlesGQLEntry[];
}

@Injectable({
	providedIn: 'root'
})
export class ArticlesGQL extends Query<ArticlesGQLResponse> {
	document = gql`
		query GetArticles {
			articlesCollection {
				_id
				title
				author
				excerpt
				tags
				releaseDate
				previewImage {
					path
				}
			}
		}
		`;
}
